<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/main.js"></script>
</head>
<body>
    <ul>
        <li><a href="/" class="back">to home</a></li>
        <li class="list-item"><a href="https://confluence.ontrq.com/pages/viewpage.action?spaceKey=KB&title=Easy+level+-+native+JS" target="_blank">Easy level - native JS</a></li>
    </ul>

    <div class="wrapper">
        <textarea class="input" name="message" id="js-message" cols="30" rows="10" spellcheck="false"></textarea>
        <p>Symbols total: <b id="js-message-left-total">0</b>, left: <b id="js-message-left-symbols">0</b></p>
    </div>

    <script>

        let TextCounter = function () {
            this.maxChar = 10,
            this.textArea = null,
            this.textAreaTotal = null,
            this.textAreaLeft = null,
            this.init = () => {
                this.textArea = document.querySelector('#js-message');
                this.textAreaTotal = document.querySelector('#js-message-left-total');
                this.textAreaLeft = document.querySelector('#js-message-left-symbols');
                
                this.events();
            },
            
            this.events = () => {
                this.putCounter();
                this.textArea.addEventListener('keyup', this.putCounter.bind(this));
                this.textArea.addEventListener('keydown', this.validateCount.bind(this));

                // this.textArea.addEventListener('keypress', this.validateCount.bind(this));
            },

            this.listener = () => {
                let countChar = this.textArea.value.length;
                let countCharLeft = this.maxChar - countChar;
                return {
                    countChar: countChar,
                    countCharLeft: countCharLeft
                };
            },

            this.putCounter = () => {
                let total = this.listener();

                this.textAreaTotal.innerHTML = total.countChar;
                this.textAreaLeft.innerHTML = total.countCharLeft;
            },

            this.validateCount = (e) => {
                let k = e.keyCode;
                let total = this.listener();

                let chCode = e.charCode;
                // console.log(chCode);

                // if (total.countChar > this.maxChar - 1 && chCode != 0) {
                //     e.preventDefault();
                // }

                if (total.countCharLeft <= 0 /* && chCode*/ ) {
                    if (k == 8 || (k >= 35 && k <= 40) || k == 45 || k == 46) return;
                    // this.textArea.value = this.textArea.value.substring(0, this.maxChar - 1);
                    event.preventDefault();
                }
            }
        };

        let counter = new TextCounter();
        counter.init();

        // charCode
        // es6 + lessons

    </script>

    <script>

        // for es6 start
            const [a, b, ... arr] = [1, 2, 3, 4, 5, 7]; 
            console.log (a, b); // 1, 2 
            console.log (arr); // [3, 4, 5, 7]


            const profileUpdate = (profileData) => {
                const { name, age, nationality, location } = profileData;
                // do something with these variables
            }
        // for es6 end

        var [a, b] = ['first', 'second', 3, 4, 5, 6];
        console.log(a, b);

    </script>

</body>
</html>